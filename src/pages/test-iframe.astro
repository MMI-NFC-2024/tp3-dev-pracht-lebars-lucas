---
import Layout from "../layouts/Layout.astro";
---

<Layout>
  <div class="mb-4">
    <a href="/" class="rounded bg-gray-600 text-white px-4 py-2 inline-block">← Retour à l'accueil</a>
  </div>
  
  <h1 class="text-2xl mb-6">Navigation avec iframe</h1>
  
  <!-- Menu EN DEHORS de l'iframe -->
  <nav class="mb-6">
    <div>
      <label for="species-select" class="block text-sm font-medium text-gray-700 mb-2">Choisir une espèce de pingouin :</label>
      <select id="species-select" class="rounded border border-gray-300 px-3 py-2 bg-white">
        <option value="Adelie">Adelie</option>
        <option value="Gentoo">Gentoo</option>
        <option value="Chinstrap">Chinstrap</option>
      </select>
    </div>
  </nav>
  
  <!-- Iframe qui affiche UNE SEULE page d'espèce -->
  <iframe 
    name="species-frame"
    src="/species/iframe/Adelie"
    class="w-full border border-gray-300 rounded"
    id="species-iframe"
    style="height: 550px;"
    onload="adjustHeight()"
  ></iframe>
  
  <script>
    function adjustHeight() {
      const iframe = document.getElementById('species-iframe');
      if (iframe) {
        const windowHeight = window.innerHeight;
        const newHeight = Math.max(windowHeight * 0.6, 550);
        iframe.style.height = newHeight + 'px';
      }
    }
    
    window.addEventListener('resize', adjustHeight);
    document.addEventListener('DOMContentLoaded', adjustHeight);
    
    // Navigation par select
    document.querySelector("#species-select")?.addEventListener("change", (evt) => {
      const value = (evt.target as HTMLSelectElement).value;
      const iframe = document.getElementById('species-iframe') as HTMLIFrameElement;
      if (iframe && value) {
        iframe.src = "/species/iframe/" + value;
      }
    });
  </script>
  
</Layout>